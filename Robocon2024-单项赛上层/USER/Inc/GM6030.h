/*
*********************************************************************************************************
*                                             INCLUDE FILES
*********************************************************************************************************
*/

#pragma once
#include "main.h"

/*
*********************************************************************************************************
*                                             EXPORTED_TYPES
*********************************************************************************************************
*/

typedef struct
{
	int16_t CurSpeed;      // (RPM, RPM, 20/16384 A)
	int16_t ExpSpeed;
	int16_t ActCurrent;
	int16_t OutCurrent;
    int16_t CurPosition;
    int16_t ExpPosition;
    int64_t Temparg;//编码器直接读出的角度
    int32_t Disparg;
    int32_t Exparg;//期望角度 157293.5=360
    int16_t Expvel;//位置环控制中的期望最大速度
    int32_t postemp;
    int16_t posdel;
    int16_t Posflag;
}GM6030_MOTOR;


/*
*********************************************************************************************************
*                                               DEFINES
*********************************************************************************************************
*/

#define	GM6030_CAN               CAN1
#define GM6030_CANSEND           HAL_CAN_AddTxMessage
#define GM6030_CANSEND_h         HAL_CAN_AddTxMessage


/*
*********************************************************************************************************
*                                              函数声明
*********************************************************************************************************
*/

void GM6030_Analyze(uint32_t GM6030_StdId,uint8_t* MotorData);
void GM6030_Motor_Current_Ctrl(void);
void GM6030_Motor_Current_Ctrl_h(void);
void GM6030_Motor_Speed_Ctrl(void);
void GM6030_Motor_Position_Ctrl(void);


/*
*********************************************************************************************************
*                                              变量声明
*********************************************************************************************************
*/


extern GM6030_MOTOR GM6030[9];


